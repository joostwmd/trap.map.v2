(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(t,e,a){},30:function(t,e,a){},52:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),c=a(24),s=a.n(c),i=(a(29),a(30),a(9)),o=a(2),u=a(1);var j=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"welcome to trap map"})})},l=a(7),d=a.n(l),p=a(13),b=a(6),f=a(3),m=a(8),h=a.n(m);var O=function(t){var e=t.track,a=t.artistName,n=e.artists,c=Object(r.useState)([]),s=Object(f.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){!function(){var t,e="feat: ",r=Object(b.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;a!==c.name&&(e+="".concat(c.name,", "))}}catch(s){r.e(s)}finally{r.f()}o(e)}()}),[]),"feat: "===i?Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:e.album.images[1].url}),Object(u.jsx)("h4",{children:e.name}),Object(u.jsx)("audio",{controls:!0,children:Object(u.jsx)("source",{src:e.preview_url})})]}):"feat: "!==i?Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:e.album.images[1].url}),Object(u.jsx)("h4",{children:e.name}),Object(u.jsx)("h5",{children:i.slice(0,-2)}),Object(u.jsx)("audio",{controls:!0,children:Object(u.jsx)("source",{src:e.preview_url})})]}):void 0};var v=function(t){var e=t.artistName,a=t.artistPicture,r=t.releasedMusic,n=t.links;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:e}),Object(u.jsx)("img",{src:a}),Object(u.jsx)("h4",{children:r}),Object(u.jsx)("a",{href:n.spotify,children:"spotify"}),Object(u.jsx)("a",{href:n.youtube,children:"youtube"}),Object(u.jsx)("a",{href:n.instagram,children:"insta"})]})};var x=function(){var t="https://trapmapversion2.herokuapp.com",e=Object(r.useState)(""),a=Object(f.a)(e,2),n=a[0],c=a[1],s=Object(r.useState)(""),i=Object(f.a)(s,2),o=i[0],j=i[1],l=Object(r.useState)(""),m=Object(f.a)(l,2),x=m[0],y=m[1],g=Object(r.useState)({}),k=Object(f.a)(g,2),w=k[0],I=k[1],N=Object(r.useState)([]),S=Object(f.a)(N,2),L=S[0],P=S[1],B=function(){var t=Object(p.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("artistIds"),t.abrupt("return",e.split(":"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(d.a.mark((function e(a){var r,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={spotifyId:a},e.next=3,h.a.post("".concat(t,"/spotify/loadArtistProfile"),r);case 3:return n=e.sent,e.next=6,n;case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(a){var r,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={dataBaseId:a},e.next=3,h.a.post("".concat(t,"/dataBase/artistProfile"),r);case 3:return n=e.sent,e.next=6,n;case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){B().then((function(t){_(t[0]).then((function(t){c(t.data[0].name),j(t.data[0].images[0].url),y(function(t){var e,a=0,r=0,n=0,c=Object(b.a)(t);try{for(c.s();!(e=c.n()).done;){var s=e.value;"single"===s.album_type?(a++,r++):"album"===s.album_type&&(a+=s.total_tracks,n++)}}catch(i){c.e(i)}finally{c.f()}return"tracks : ".concat(a,", singles : ").concat(r,", albums : ").concat(n)}(t.data[2])),P(t.data[1])})),C(t[1]).then((function(t){I({spotify:t.data.spotifyLink,youtube:t.data.youtubeLink,instagram:t.data.instagramLink})}))}))}),[]),Object(u.jsxs)("div",{id:"profileWrapper",children:[Object(u.jsx)(v,{artistName:n,artistPicture:o,releasedMusic:x,links:w}),L.map((function(t){if(null!==t.preview_url)return Object(u.jsx)("div",{children:Object(u.jsx)(O,{track:t,artistName:n})},t.name)}))]})},y=a(14),g=a.n(y);var k=function(){var t=Object(r.useRef)(null),e=Object(r.useRef)(null),a=[13.404954,52.520008],n=[[12.75,52.25],[14,52.75]];g.a.accessToken="pk.eyJ1Ijoiam9vc3R3bWQiLCJhIjoiY2t1NDQ3NmJqMXRwbzJwcGM5a3FuY3B3dCJ9.yyon_mO5Y9sI1WgD-XFDRQ";var c=[];return Object(r.useEffect)((function(){h.a.get("".concat("https://trapmapversion2.herokuapp.com","/dataBase/map")).then((function(t){!function(t){var e,a=Object(b.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,n={type:"feature",properties:{artistName:r.name,artistPicture:r.picture,artistDatabaseId:r._id,artistSpotifyId:r.spotifyID},geometry:{type:"Point",coordinates:r.coordinates}};c.push(n)}}catch(s){a.e(s)}finally{a.f()}}(t.data)})),e.current||(e.current=new g.a.Map({container:t.current,style:"mapbox://styles/joostwmd/ckvwifepf21kj15pflu8gbkdd",center:a,zoom:8.5,minZoom:8.5,maxBounds:n}),e.current.on("load",(function(){e.current.addSource("artists",{type:"geojson",data:{type:"FeatureCollection",features:c}});for(var t=function(t){var a=document.createElement("div");a.className="marker",new g.a.Marker(a).setLngLat(c[t].geometry.coordinates).addTo(e.current);for(var r=document.getElementsByClassName("marker"),n=function(t){r[t].addEventListener("click",(function(){var e,a,r;e=c[t].properties.artistDatabaseId,a=c[t].properties.artistSpotifyId,"undefined"!==typeof Storage&&localStorage.setItem("artistIds","".concat(a,":").concat(e)),r=c[t].properties.artistName,window.location.href="".concat("https://trapmapversion2.herokuapp.com","/map/").concat(r)})),r[t].style.backgroundImage="url(".concat(c[t].properties.artistPicture,")"),e.current.on("zoom",(function(){var a=15*Number(e.current.getZoom()-9.255562090280671)+30;r[t].style.height="".concat(a,"px"),r[t].style.width="".concat(a,"px")}))},s=0;s<r.length;s++)n(s)},a=0;a<c.length;a++)t(a)})))}),[]),Object(u.jsx)("div",{children:Object(u.jsx)("div",{ref:t,className:"map-container"})})};var w=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("button",{children:"home"})}),Object(u.jsx)(i.b,{to:"/map",children:Object(u.jsx)("button",{children:"map"})})]})};var I=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(w,{}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",element:Object(u.jsx)(j,{})}),Object(u.jsx)(o.a,{exact:!0,path:"/map",element:Object(u.jsx)(k,{})}),Object(u.jsx)(o.a,{exact:!0,path:"/map/:artistName",element:Object(u.jsx)(x,{})})]})]})})},N=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(e){var a=e.getCLS,r=e.getFID,n=e.getFCP,c=e.getLCP,s=e.getTTFB;a(t),r(t),n(t),c(t),s(t)}))};a(51);s.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),N()}},[[52,1,2]]]);
//# sourceMappingURL=main.fa579ebf.chunk.js.map