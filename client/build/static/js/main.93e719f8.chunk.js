(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(t,e,a){},30:function(t,e,a){},52:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a.n(n),r=a(24),s=a.n(r),i=(a(29),a(30),a(8)),o=a(2),u=a(4),l=a(3),d=a.n(l),p=a(0);var j=function(){var t=Object(n.useState)(""),e=Object(u.a)(t,2),a=e[0],c=e[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"welcome to trap map"}),Object(p.jsx)("p",{children:"new plattfrom to discover music: no algorithms, no playlists, just you and the music"}),Object(p.jsx)(i.b,{to:"/map",children:Object(p.jsx)("button",{children:"check out the demo version"})}),Object(p.jsx)("p",{children:"leveraging blockchain technology to build the plattform with you"}),Object(p.jsx)("h5",{children:"some timeline"}),Object(p.jsx)("h2",{children:"sign-up for the beta-key of the official trap map app"}),Object(p.jsx)("input",{value:a,onChange:function(t){return c(t.target.value)},placeholder:"your email adress",type:"email"}),Object(p.jsx)("button",{onClick:function(){var t={email:a};d.a.post("".concat("https://trapmapversion2.herokuapp.com","/traffic/addSignUpForBetaKey"),t)},children:"sign up"}),Object(p.jsx)("h2",{children:"do you want to get on the map? DM us on insta"}),Object(p.jsx)("a",{href:"https://www.instagram.com/mapmusic.berlin/",children:"insta"})]})},m=a(9),f=a.n(m),b=a(13),h=a(7),O=a.p+"static/media/spotifyLogo.8eef091b.png",v=a.p+"static/media/appleMusicLogo.2228dbd7.png",y=a.p+"static/media/youtubeLogo.6b5588fd.png",x=a.p+"static/media/instagramLogo.f3459bc3.png";var g=function(t){var e=t.artistName,a=t.track,n=t.artistDatabaseId;return Object(p.jsxs)("div",{className:"track",children:[Object(p.jsx)("img",{className:"trackCover",src:a.album.images[1].url,alt:"track cover"}),Object(p.jsxs)("div",{className:"trackTitleAndTimebar",children:[Object(p.jsx)("h4",{children:"".concat(a.name," ").concat(function(t){if(1===t.length)return"";var a,n="feat: ",c=Object(h.a)(t);try{for(c.s();!(a=c.n()).done;){var r=a.value;e!==r.name&&(n+="".concat(r.name,", "))}}catch(s){c.e(s)}finally{c.f()}return n.slice(0,-2)}(a.artists))}),Object(p.jsx)("div",{className:"maxTime",children:Object(p.jsx)("div",{id:"timeInTrack:".concat(a.name)})})]}),Object(p.jsx)("audio",{id:"audioPlayer:".concat(a.name),className:"audioPlayer",onPlay:function(){!function(t){var e={artistDatabaseId:t};d.a.post("".concat("http://localhost:5005","/traffic/addSnippetPlayed"),e)}(n)},children:Object(p.jsx)("source",{src:a.preview_url,type:"audio/mp3"})}),Object(p.jsx)("div",{className:"playPauseButtonWrapper",children:Object(p.jsx)("button",{id:"playPauseButton:".concat(a.name),className:"playPauseButton",onClick:function(){!function(t){var e=document.getElementsByClassName("audioPlayer"),a=document.getElementById("audioPlayer:".concat(t)),n=document.getElementsByClassName("playPauseButton"),c=document.getElementById("playPauseButton:".concat(t));if(a.paused){var r,s=Object(h.a)(e);try{for(s.s();!(r=s.n()).done;)r.value.pause()}catch(l){s.e(l)}finally{s.f()}a.play();var i,o=Object(h.a)(n);try{for(o.s();!(i=o.n()).done;)i.value.innerHTML="play"}catch(l){o.e(l)}finally{o.f()}c.innerHTML="pause"}else a.pause(),c.innerHTML="play";var u=document.getElementById("timeInTrack:".concat(t));a.ontimeupdate=function(){if(a.currentTime>=30&&(c.innerHTML="play",u.style.width="0px"),a.currentTime<30){var t=250/30*a.currentTime;u.style.width="".concat(t,"px"),u.style.height="10px",u.style.backgroundColor="black"}}}(a.name)},children:"play"})})]})};var k=function(t){var e=t.app,a=t.link,n=t.artistDatabaseId,c="http://localhost:5005";return"spotify"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};d.a.post("".concat(c,"/traffic/addSpotifyProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:O,alt:"spotify logo"})}):"appleMusic"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};d.a.post("".concat(c,"/traffic/addAppleMusicProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:v,alt:"apple music logo"})}):"youtube"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};d.a.post("".concat(c,"/traffic/addYoutubeProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:y,alt:"youtube logo"})}):"instagram"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};d.a.post("".concat(c,"/traffic/addInstagramProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:x,alt:"instagram logo"})}):void 0};var I=function(t){var e=t.artistName,a=t.artistPicture,n=t.releasedMusic;return Object(p.jsxs)("div",{className:"artistProfileHeader",children:[Object(p.jsx)("img",{src:a,alt:"artist profile"}),Object(p.jsxs)("div",{className:"artistNameAndReleasedMusic",children:[Object(p.jsx)("h1",{children:e}),Object(p.jsx)("h4",{children:n})]})]})};var N=function(){var t="http://localhost:5005",e=Object(n.useState)(""),a=Object(u.a)(e,2),c=a[0],r=a[1],s=Object(n.useState)(""),i=Object(u.a)(s,2),o=i[0],l=i[1],j=Object(n.useState)(""),m=Object(u.a)(j,2),O=m[0],v=m[1],y=Object(n.useState)(""),x=Object(u.a)(y,2),N=x[0],w=x[1],P=Object(n.useState)([]),L=Object(u.a)(P,2),B=L[0],M=L[1],C=Object(n.useState)([]),S=Object(u.a)(C,2),D=S[0],T=S[1],E=function(){var t=Object(b.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("artistIds"),t.abrupt("return",e.split(":"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(f.a.mark((function e(a){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={spotifyId:a},e.next=3,d.a.post("".concat(t,"/spotify/loadArtistProfile"),n);case 3:return c=e.sent,e.next=6,c;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(f.a.mark((function e(a){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={dataBaseId:a},e.next=3,d.a.post("".concat(t,"/dataBase/artistProfile"),n);case 3:return c=e.sent,e.next=6,c;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){E().then((function(e){F(e[0]).then((function(t){console.log(t),r(t.data[0].name),v(t.data[0].images[0].url),w(function(t){var e,a=0,n=0,c=0,r=Object(h.a)(t);try{for(r.s();!(e=r.n()).done;){var s=e.value;"single"===s.album_type?(a++,n++):"album"===s.album_type&&(a+=s.total_tracks,c++)}}catch(i){r.e(i)}finally{r.f()}return"tracks : ".concat(a,", singles : ").concat(n,", albums : ").concat(c)}(t.data[2])),T(t.data[1])})),_(e[1]).then((function(e){l(e.data._id),M([["spotify",e.data.spotifyLink],["appleMusic",e.data.appleMusicLink],["youtube",e.data.youtubeLink],["instagram",e.data.instagramLink]]),function(e){var a={dataBaseId:e};d.a.post("".concat(t,"/traffic/addTrapMapProfileVisit"),a)}(e.data._id)}))}))}),[]),Object(p.jsxs)("div",{className:"artistProfile",children:[Object(p.jsx)(I,{artistName:c,artistPicture:O,releasedMusic:N}),Object(p.jsx)("div",{className:"links",children:B.map((function(t){return Object(p.jsx)(k,{app:t[0],link:t[1],artistDatabaseId:o})}))}),Object(p.jsx)("div",{className:"tracks",children:D.map((function(t){return Object(p.jsx)(g,{track:t,artistName:c,artistDatabaseId:o})}))})]})},w=a(14),P=a.n(w);var L=function(){var t=Object(n.useRef)(null),e=Object(n.useRef)(null),a=[13.404954,52.520008],c=[[12.75,52.25],[14,52.75]];P.a.accessToken="pk.eyJ1Ijoiam9vc3R3bWQiLCJhIjoiY2t1NDQ3NmJqMXRwbzJwcGM5a3FuY3B3dCJ9.yyon_mO5Y9sI1WgD-XFDRQ";var r=[];return Object(n.useEffect)((function(){d.a.get("".concat("http://localhost:5005","/dataBase/map")).then((function(t){!function(t){var e,a=Object(h.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,c={type:"feature",properties:{artistName:n.name,artistPicture:n.picture,artistDatabaseId:n._id,artistSpotifyId:n.spotifyID},geometry:{type:"Point",coordinates:n.coordinates}};r.push(c)}}catch(s){a.e(s)}finally{a.f()}}(t.data)})),e.current||(e.current=new P.a.Map({container:t.current,style:"mapbox://styles/joostwmd/ckufanbzo4qlm18qj3w744lbx",center:a,zoom:8.5,minZoom:8.5,maxBounds:c}),e.current.on("load",(function(){e.current.addSource("artists",{type:"geojson",data:{type:"FeatureCollection",features:r}});for(var t=function(t){var a=document.createElement("div");a.className="marker",new P.a.Marker(a).setLngLat(r[t].geometry.coordinates).addTo(e.current);for(var n=document.getElementsByClassName("marker"),c=function(t){n[t].addEventListener("click",(function(){var e,a,n;e=r[t].properties.artistDatabaseId,a=r[t].properties.artistSpotifyId,"undefined"!==typeof Storage&&localStorage.setItem("artistIds","".concat(a,":").concat(e)),n=r[t].properties.artistName,window.location.href="".concat("http://localhost:3000","/map/").concat(n)})),n[t].style.backgroundImage="url(".concat(r[t].properties.artistPicture,")"),e.current.on("zoom",(function(){var a=15*Number(e.current.getZoom()-9.255562090280671)+30;n[t].style.height="".concat(a,"px"),n[t].style.width="".concat(a,"px")}))},s=0;s<n.length;s++)c(s)},a=0;a<r.length;a++)t(a)})))}),[]),Object(p.jsx)("div",{children:Object(p.jsx)("div",{ref:t,className:"map-container"})})};var B=function(){return Object(p.jsxs)("div",{id:"nav",children:[Object(p.jsx)(i.b,{to:"/",children:Object(p.jsx)("button",{children:"home"})}),Object(p.jsx)(i.b,{to:"/map",children:Object(p.jsx)("button",{children:"map"})})]})};var M=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(B,{}),Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{exact:!0,path:"/",element:Object(p.jsx)(j,{})}),Object(p.jsx)(o.a,{exact:!0,path:"/map",element:Object(p.jsx)(L,{})}),Object(p.jsx)(o.a,{exact:!0,path:"/map/:artistName",element:Object(p.jsx)(N,{})})]})]})})},C=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),c(t),r(t),s(t)}))};a(51);s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root")),C()}},[[52,1,2]]]);
//# sourceMappingURL=main.93e719f8.chunk.js.map