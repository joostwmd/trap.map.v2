(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(t,e,a){},30:function(t,e,a){},52:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a.n(n),r=a(24),s=a.n(r),i=(a(29),a(30),a(9)),o=a(2),u=a(0);var d=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"welcome to trap map"})})},l=a(8),j=a.n(l),f=a(13),p=a(7),b=a(3),h=a(6),m=a.n(h);var O=function(){var t="https://trapmapversion2.herokuapp.com",e=Object(n.useState)(""),a=Object(b.a)(e,2),c=a[0],r=a[1],s=Object(n.useState)(""),i=Object(b.a)(s,2),o=i[0],d=i[1],l=Object(n.useState)(""),h=Object(b.a)(l,2),O=h[0],v=h[1],x=Object(n.useState)(""),y=Object(b.a)(x,2),g=y[0],k=y[1],I=Object(n.useState)({}),w=Object(b.a)(I,2),S=w[0],P=w[1],B=Object(n.useState)([]),C=Object(b.a)(B,2),N=C[0],F=C[1],L=function(t){var e,a="feat: ",n=Object(p.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;c!==r.name&&(a+="".concat(r.name,", "))}}catch(s){n.e(s)}finally{n.f()}return a.slice(0,-2)},_=function(){var t=Object(f.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("artistIds"),t.abrupt("return",e.split(":"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(j.a.mark((function e(a){var n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={spotifyId:a},e.next=3,m.a.post("".concat(t,"/spotify/loadArtistProfile"),n);case 3:return c=e.sent,e.next=6,c;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(j.a.mark((function e(a){var n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={dataBaseId:a},e.next=3,m.a.post("".concat(t,"/dataBase/artistProfile"),n);case 3:return c=e.sent,e.next=6,c;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var a={dataBaseId:e};m.a.post("".concat(t,"/traffic/addSnippetPlayed"),a)};return Object(n.useEffect)((function(){_().then((function(e){D(e[0]).then((function(t){console.log(t),r(t.data[0].name),v(t.data[0].images[0].url),k(function(t){var e,a=0,n=0,c=0,r=Object(p.a)(t);try{for(r.s();!(e=r.n()).done;){var s=e.value;"single"===s.album_type?(a++,n++):"album"===s.album_type&&(a+=s.total_tracks,c++)}}catch(i){r.e(i)}finally{r.f()}return"tracks : ".concat(a,", singles : ").concat(n,", albums : ").concat(c)}(t.data[2])),F(t.data[1])})),J(e[1]).then((function(e){d(e.data._id),P({spotify:e.data.spotifyLink,youtube:e.data.youtubeLink,instagram:e.data.instagramLink}),function(e){var a={dataBaseId:e};m.a.post("".concat(t,"/traffic/addTrapMapProfileVisit"),a)}(e.data._id)}))}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{id:"artistProfileHeader",children:[Object(u.jsx)("h1",{children:c}),Object(u.jsx)("img",{src:O}),Object(u.jsx)("h4",{children:g}),Object(u.jsx)("div",{onClick:function(){!function(e){var a={dataBaseId:e};m.a.post("".concat(t,"/traffic/addSpotifyProfileVisit"),a)}(o)},children:Object(u.jsx)("a",{href:S.spotify,children:"spotify"})}),Object(u.jsx)("div",{onClick:function(){!function(e){var a={dataBaseId:e};m.a.post("".concat(t,"/traffic/addYoutubeProfileVisit"),a)}(o)},children:Object(u.jsx)("a",{href:S.youtube,children:"youtube"})}),Object(u.jsx)("div",{onClick:function(){!function(e){var a={dataBaseId:e};m.a.post("".concat(t,"/traffic/addInstagramProfileVisit"),a)}(o)},children:Object(u.jsx)("a",{href:S.instagram,children:"insta"})})]}),Object(u.jsx)("div",{id:"tracks",children:N.map((function(t){return 1===t.artists.length?Object(u.jsxs)("div",{class:"trackWithoutFeatures",children:[Object(u.jsx)("img",{src:t.album.images[1].url}),Object(u.jsx)("h4",{children:t.name}),Object(u.jsx)("audio",{controls:!0,onPlay:function(){E(o)},children:Object(u.jsx)("source",{src:t.preview_url})})]}):Object(u.jsxs)("div",{class:"trackWithFeatures",children:[Object(u.jsx)("img",{src:t.album.images[1].url}),Object(u.jsx)("h4",{children:t.name}),Object(u.jsx)("h5",{children:L(t.artists)}),Object(u.jsx)("audio",{controls:!0,onPlay:function(){E(o)},children:Object(u.jsx)("source",{src:t.preview_url})})]})}))})]})},v=a(14),x=a.n(v);var y=function(){var t=Object(n.useRef)(null),e=Object(n.useRef)(null),a=[13.404954,52.520008],c=[[12.75,52.25],[14,52.75]];x.a.accessToken="pk.eyJ1Ijoiam9vc3R3bWQiLCJhIjoiY2t1NDQ3NmJqMXRwbzJwcGM5a3FuY3B3dCJ9.yyon_mO5Y9sI1WgD-XFDRQ";var r=[];return Object(n.useEffect)((function(){m.a.get("".concat("https://trapmapversion2.herokuapp.com","/dataBase/map")).then((function(t){!function(t){var e,a=Object(p.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,c={type:"feature",properties:{artistName:n.name,artistPicture:n.picture,artistDatabaseId:n._id,artistSpotifyId:n.spotifyID},geometry:{type:"Point",coordinates:n.coordinates}};r.push(c)}}catch(s){a.e(s)}finally{a.f()}}(t.data)})),e.current||(e.current=new x.a.Map({container:t.current,style:"mapbox://styles/joostwmd/ckvwifepf21kj15pflu8gbkdd",center:a,zoom:8.5,minZoom:8.5,maxBounds:c}),e.current.on("load",(function(){e.current.addSource("artists",{type:"geojson",data:{type:"FeatureCollection",features:r}});for(var t=function(t){var a=document.createElement("div");a.className="marker",new x.a.Marker(a).setLngLat(r[t].geometry.coordinates).addTo(e.current);for(var n=document.getElementsByClassName("marker"),c=function(t){n[t].addEventListener("click",(function(){var e,a,n;e=r[t].properties.artistDatabaseId,a=r[t].properties.artistSpotifyId,"undefined"!==typeof Storage&&localStorage.setItem("artistIds","".concat(a,":").concat(e)),n=r[t].properties.artistName,window.location.href="".concat("https://trapmapversion2.herokuapp.com","/map/").concat(n)})),n[t].style.backgroundImage="url(".concat(r[t].properties.artistPicture,")"),e.current.on("zoom",(function(){var a=15*Number(e.current.getZoom()-9.255562090280671)+30;n[t].style.height="".concat(a,"px"),n[t].style.width="".concat(a,"px")}))},s=0;s<n.length;s++)c(s)},a=0;a<r.length;a++)t(a)})))}),[]),Object(u.jsx)("div",{children:Object(u.jsx)("div",{ref:t,className:"map-container"})})};var g=function(){return Object(u.jsxs)("div",{id:"nav",children:[Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("button",{children:"home"})}),Object(u.jsx)(i.b,{to:"/map",children:Object(u.jsx)("button",{children:"map"})})]})};var k=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(g,{}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",element:Object(u.jsx)(d,{})}),Object(u.jsx)(o.a,{exact:!0,path:"/map",element:Object(u.jsx)(y,{})}),Object(u.jsx)(o.a,{exact:!0,path:"/map/:artistName",element:Object(u.jsx)(O,{})})]})]})})},I=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),c(t),r(t),s(t)}))};a(51);s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),I()}},[[52,1,2]]]);
//# sourceMappingURL=main.6f912d27.chunk.js.map