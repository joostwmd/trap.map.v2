(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a(16),r=a.n(c),i=(a(84),a(85),a(86),a(87),a(40)),s=a(2),o=a(5),l=a(4),u=a.n(l),p=a(1);var d=function(){var t="https://trapmapversion2.herokuapp.com",e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"></path><path d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z" fill="rgba(255,255,255,1)"></path></svg>',a=Object(n.useState)(""),c=Object(o.a)(a,2),r=c[0],i=c[1],s=function(){var a={email:r};u.a.post("".concat(t,"/traffic/addSignUpForBetaKey"),a),document.getElementsByClassName("signUpButtonIconContainer")[0].innerHTML===e&&(document.getElementsByClassName("signUpButtonIconContainer")[0].innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 15.172l9.192-9.193 1.415 1.414L10 18l-6.364-6.364 1.414-1.414z"/></svg>',document.getElementsByClassName("signUpButton")[0].classList.toggle("signUpButton__circle"),document.getElementById("emailInput").disabled=!0,document.getElementById("emailInput").placeholder="thank you")};return Object(n.useEffect)((function(){document.getElementsByClassName("signUpButtonIconContainer")[0].innerHTML=e})),Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"welcome to trap map"}),Object(p.jsx)("p",{children:"new plattfrom to discover music: no algorithms, no playlists, just you and the music"}),Object(p.jsx)("button",{onClick:function(){window.location.href="".concat(t,"/map/")},children:"check out the demo version"}),Object(p.jsx)("h2",{children:"sign-up for the beta-key of the official trap map app"}),Object(p.jsxs)("div",{id:"signUpWithEmailContainer",children:[Object(p.jsx)("input",{id:"emailInput",value:r,onChange:function(t){return i(t.target.value)},placeholder:"your email adress",type:"email"}),Object(p.jsx)("div",{className:"signUpButton",onClick:function(){return s()},children:Object(p.jsx)("div",{className:"signUpButtonContainer",children:Object(p.jsx)("div",{className:"signUpButtonIconContainer",children:e})})})]}),Object(p.jsx)("h2",{children:"do you want to get on the map? DM us on insta"}),Object(p.jsx)("a",{href:"https://www.instagram.com/mapmusic.berlin/",children:"insta"})]})},m=a(13),f=a.n(m),j=a(22),b=a(11);var h=function(t){var e=t.artistName,a=t.artistDatabaseId,n=t.track,c=function(t){document.getElementById("audioPlayer:".concat(t)).pause();var e=document.getElementById("trackTitle:".concat(t));e.style.color="black",e.style.fontSize="25px"},r=function(t){var e=document.getElementsByClassName("audioPlayer");if(document.getElementById("audioPlayer:".concat(t)).paused){var a,n=Object(b.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;c(r.id.split(":")[1])}}catch(i){n.e(i)}finally{n.f()}!function(t){document.getElementById("audioPlayer:".concat(t)).play();var e=document.getElementById("trackTitle:".concat(t));e.style.color="blue",e.style.fontSize="40px"}(t)}else c(t)};return Object(p.jsxs)("div",{className:"track",onClick:function(){r(n.name)},children:[Object(p.jsx)("div",{id:"trackCover:".concat(n.name),className:"trackCover",style:{backgroundImage:"url(".concat(n.album.images[1].url,")")}}),Object(p.jsx)("div",{className:"trackTitleAndAlbum",children:Object(p.jsx)("div",{id:"trackTitle:".concat(n.name),className:"trackTitle",children:"".concat(n.name," ").concat(function(t){if(1===t.length)return"";var a,n="feat: ",c=Object(b.a)(t);try{for(c.s();!(a=c.n()).done;){var r=a.value;e!==r.name&&(n+="".concat(r.name,", "))}}catch(i){c.e(i)}finally{c.f()}return n.slice(0,-2)}(n.artists))})}),Object(p.jsx)("audio",{id:"audioPlayer:".concat(n.name),className:"audioPlayer",onPlay:function(){!function(t){var e={artistDatabaseId:t};u.a.post("".concat("https://trapmapversion2.herokuapp.com","/traffic/addSnippetPlayed"),e)}(a)},children:Object(p.jsx)("source",{src:n.preview_url,type:"audio/mp3"})})]})},g=a.p+"static/media/spotifyLogo.8eef091b.png",v=a.p+"static/media/appleMusicLogo.2228dbd7.png",y=a.p+"static/media/youtubeLogo.6b5588fd.png",O=a.p+"static/media/instagramLogo.f3459bc3.png";var x=function(t){var e=t.app,a=t.link,n=t.artistDatabaseId,c="https://trapmapversion2.herokuapp.com";return"spotify"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};u.a.post("".concat(c,"/traffic/addSpotifyProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:g,alt:"spotify logo"})}):"appleMusic"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};u.a.post("".concat(c,"/traffic/addAppleMusicProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:v,alt:"apple music logo"})}):"youtube"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};u.a.post("".concat(c,"/traffic/addYoutubeProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:y,alt:"youtube logo"})}):"instagram"===e?Object(p.jsx)("a",{href:a,onClick:function(){!function(){var t={artistDatabaseId:n};u.a.post("".concat(c,"/traffic/addInstagramProfileVisit"),t)}()},children:Object(p.jsx)("img",{className:"appLogo",src:O,alt:"instagram logo"})}):void 0};var k=function(t){var e=t.artistName,a=t.artistPicture;return t.releasedMusic,Object(p.jsxs)("div",{className:"artistProfileHeader",children:[Object(p.jsx)("img",{src:a,alt:"artist profile"}),Object(p.jsx)("div",{className:"artistNameAndReleasedMusic",children:Object(p.jsx)("h1",{children:e})})]})};var w=function(){var t="https://trapmapversion2.herokuapp.com",e=Object(n.useState)(""),a=Object(o.a)(e,2),c=a[0],r=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),l=s[0],d=s[1],m=Object(n.useState)(""),g=Object(o.a)(m,2),v=g[0],y=g[1],O=Object(n.useState)(""),w=Object(o.a)(O,2),N=w[0],U=w[1],I=Object(n.useState)([]),B=Object(o.a)(I,2),C=B[0],P=B[1],M=Object(n.useState)([]),F=Object(o.a)(M,2),L=F[0],S=F[1],D=function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[window.location.pathname.split(":")[1],window.location.pathname.split(":")[2]]);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(f.a.mark((function e(a){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={spotifyId:a},e.next=3,u.a.post("".concat(t,"/spotify/loadArtistProfile"),n);case 3:return c=e.sent,e.next=6,c;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(f.a.mark((function e(a){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={dataBaseId:a},e.next=3,u.a.post("".concat(t,"/dataBase/artistProfile"),n);case 3:return c=e.sent,e.next=6,c;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){D().then((function(e){T(e[0]).then((function(e){d(e.data._id),P([["spotify",e.data.spotifyLink],["appleMusic",e.data.appleMusicLink],["youtube",e.data.youtubeLink],["instagram",e.data.instagramLink]]),function(e){var a={dataBaseId:e};u.a.post("".concat(t,"/traffic/addTrapMapProfileVisit"),a)}(e.data._id)})),E(e[1]).then((function(t){r(t.data[0].name),y(t.data[0].images[0].url),U(function(t){var e,a=0,n=0,c=0,r=Object(b.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;"single"===i.album_type?(a++,n++):"album"===i.album_type&&(a+=i.total_tracks,c++)}}catch(s){r.e(s)}finally{r.f()}return"tracks : ".concat(a,", singles : ").concat(n,", albums : ").concat(c)}(t.data[2])),S(t.data[1])}))}))}),[]),Object(p.jsxs)("div",{className:"artistProfile",children:[Object(p.jsx)(k,{artistName:c,artistPicture:v,releasedMusic:N}),Object(p.jsx)("div",{className:"links",children:C.map((function(t){return Object(p.jsx)(x,{app:t[0],link:t[1],artistDatabaseId:l})}))}),Object(p.jsx)("div",{className:"tracks",children:L.map((function(t){if(null!==t.preview_url)return Object(p.jsx)(h,{track:t,artistName:c,artistDatabaseId:l})}))})]})},N=a(23),U=a.n(N);a(37);var I=function(){var t=Object(n.useRef)(null),e=Object(n.useRef)(null),a=[13.404954,52.520008],c=[[12.75,52.25],[14,52.75]];U.a.accessToken="pk.eyJ1Ijoiam9vc3R3bWQiLCJhIjoiY2t1NDQ3NmJqMXRwbzJwcGM5a3FuY3B3dCJ9.yyon_mO5Y9sI1WgD-XFDRQ";var r=[];return Object(n.useEffect)((function(){u.a.get("".concat("https://trapmapversion2.herokuapp.com","/dataBase/map")).then((function(t){!function(t){var e,a=Object(b.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,c={type:"feature",properties:{artistName:n.name,artistPicture:n.picture,artistDatabaseId:n._id,artistSpotifyId:n.spotifyID},geometry:{type:"Point",coordinates:n.coordinates}};r.push(c)}}catch(i){a.e(i)}finally{a.f()}}(t.data)})),e.current||(e.current=new U.a.Map({container:t.current,style:"mapbox://styles/joostwmd/ckucoygnc51gn18s0xu6mjltv",center:a,zoom:8.5,minZoom:8.5,maxBounds:c}),e.current.on("load",(function(){e.current.addSource("artists",{type:"geojson",data:{type:"FeatureCollection",features:r}});for(var t=function(t){var a=document.createElement("div");a.className="marker",new U.a.Marker(a).setLngLat(r[t].geometry.coordinates).addTo(e.current);for(var n=document.getElementsByClassName("marker"),c=function(t){n[t].addEventListener("click",(function(){var e,a,n;e=r[t].properties.artistName,a=r[t].properties.artistDatabaseId,n=r[t].properties.artistSpotifyId,window.location.href="".concat("https://trapmapversion2.herokuapp.com","/map/").concat(e,":").concat(a,":").concat(n)})),n[t].style.backgroundImage="url(".concat(r[t].properties.artistPicture,")"),n[t].innerHTML='<p className="artistNameInMarker">'.concat(r[t].properties.artistName,"</p>"),e.current.on("zoom",(function(){var a=9.255562090280671,c=15*Number(e.current.getZoom()-a)+30;n[t].style.height="".concat(c,"px"),n[t].style.width="".concat(c,"px");var i=5*Number(e.current.getZoom()-a)+10;n[t].innerHTML='<p className="artistNameInMarker" style=\'font-size:'.concat(i,"px'>").concat(r[t].properties.artistName,"</p>")}))},i=0;i<n.length;i++)c(i)},a=0;a<r.length;a++)t(a)})))}),[]),Object(p.jsx)("div",{children:Object(p.jsx)("div",{ref:t,className:"map-container"})})};var B=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(i.a,{children:Object(p.jsxs)(s.c,{children:[Object(p.jsx)(s.a,{exact:!0,path:"/",element:Object(p.jsx)(d,{})}),Object(p.jsx)(s.a,{exact:!0,path:"/map",element:Object(p.jsx)(I,{})}),Object(p.jsx)(s.a,{exact:!0,path:"/map/:artistName",element:Object(p.jsx)(w,{})})]})})})},C=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,115)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))},P=a(20),M=a(9),F=function(){return Object(p.jsx)(M.a,{styles:"\n      \n      @font-face {\n        font-family: 'PhillySans';\n        font-style: normal;\n        font-weight: 700;\n        font-display: swap;\n        src: url('../fonts/PhillySans.woff') format('woff')\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n      }\n      \n      @font-face {\n        font-family: 'PhillySans';\n        font-style: normal;\n        font-weight: 400;\n        font-display: swap;\n        src: url('../fonts/PhillySans.woff') format('woff')\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n      }\n      "})},L=Object(P.b)({fonts:{heading:"PhillySans",body:"PhillySans"},config:{initialColorMode:"light",useSystemColorMode:!1}});r.a.render(Object(p.jsx)(n.StrictMode,{children:Object(p.jsxs)(P.a,{theme:L,children:[Object(p.jsx)(F,{}),Object(p.jsx)(B,{})]})}),document.getElementById("root")),C()},84:function(t,e,a){},85:function(t,e,a){},86:function(t,e,a){},87:function(t,e,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.8da69cbc.chunk.js.map